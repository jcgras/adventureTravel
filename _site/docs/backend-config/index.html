<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Backend configuration - Adventure Travel</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Backend configuration | Adventure Travel</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Backend configuration" /> <meta property="og:locale" content="en_US" /> <link rel="canonical" href="http://localhost:4000/docs/backend-config/" /> <meta property="og:url" content="http://localhost:4000/docs/backend-config/" /> <meta property="og:site_name" content="Adventure Travel" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Backend configuration" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","headline":"Backend configuration","url":"http://localhost:4000/docs/backend-config/"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Adventure Travel </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/getting-started/" class="nav-list-link">Getting started</a></li><li class="nav-list-item active"><a href="http://localhost:4000/docs/backend-config/" class="nav-list-link active">Backend configuration</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/app-config/" class="nav-list-link">App configuration</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/project-structure/" class="nav-list-link">Project structure</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/push-notifications/" class="nav-list-link">Push Notifications</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/firebase-database-rules/" class="nav-list-link">Firebase Database Rules</a></li><li class="nav-list-item"><a href="http://localhost:4000/docs/migrating-to-your-brand/" class="nav-list-link">Extra: Migrating to your own brand</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Adventure Travel" aria-label="Search Adventure Travel" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="backend-configuration"> <a href="#backend-configuration" class="anchor-heading" aria-labelledby="backend-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Backend Configuration </h1> <p>As part of the architecture we have included the use of <strong>Firebase</strong> as a complement for backend operations. Firebase is a Google Backend-as-a-Service (BaaS) platform that helps you build, improve and grow your applications. It offers a wide range of features, but for the purposes of this project we will focus on the following services:</p> <ul> <li>Firebase Authentication (For our user authentication service)</li> <li>Firebase Realtime Database (As realtime database)</li> <li>Cloud Firestore (As database)</li> <li>Cloud Messaging (For Push Notifications)</li> </ul> <p class="text-red-100"><strong>Warning</strong>: Before running the app for the first time, it’s required to first configure a new application from <strong>Firebase Console platform</strong>.</p> <p>Below we describe all the steps to configure the Firebase based backend.</p><hr /> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading" aria-labelledby="table-of-contents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#create-a-firebase-project" id="markdown-toc-create-a-firebase-project">Create a Firebase project</a> <ol> <li><a href="#register-your-app-with-firebase-ios" id="markdown-toc-register-your-app-with-firebase-ios">Register your app with Firebase (iOS)</a></li> <li><a href="#register-your-app-with-firebase-android" id="markdown-toc-register-your-app-with-firebase-android">Register your app with Firebase (Android)</a></li> </ol> </li> <li><a href="#firebase-authentication" id="markdown-toc-firebase-authentication">Firebase Authentication</a> <ol> <li><a href="#apple-sign-in" id="markdown-toc-apple-sign-in">Apple Sign-in</a></li> </ol> </li> <li><a href="#firebase-realtime-database" id="markdown-toc-firebase-realtime-database">Firebase Realtime Database</a></li> <li><a href="#cloud-firestore" id="markdown-toc-cloud-firestore">Cloud Firestore</a></li> <li><a href="#cloud-messaging-push-notifications" id="markdown-toc-cloud-messaging-push-notifications">Cloud Messaging (Push Notifications)</a></li> </ol><hr /> <h2 id="create-a-firebase-project"> <a href="#create-a-firebase-project" class="anchor-heading" aria-labelledby="create-a-firebase-project"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a Firebase project </h2> <p>Before you can add Firebase to your app, you need to create a Firebase project to connect to your iOS or Android app. Follow these steps or consult the <a href="https://firebase.google.com/docs?authuser=0" target="_blank">Firebase documentation<img src="/images/ext-link.png" alt="icon" /></a> to create a new project.</p> <ol> <li>Sign into <a href="https://console.firebase.google.com" target="_blank">Firebase<img src="/images/ext-link.png" alt="icon" /></a> using a Google account.</li> <li>In the <strong>Firebase console</strong>, click <strong>Add project</strong>, then select or enter your <em>Project name</em></li> <li>Click <strong>Continue</strong>.</li> <li>Click <strong>Create project</strong></li> </ol> <p>Firebase automatically provides resources for your project. When the process completes, you’ll be taken to the overview page of your Firebase project.</p> <p><img src="/images/createFirebaseProject.gif" alt="Image" /></p> <h3 id="register-your-app-with-firebase-ios"> <a href="#register-your-app-with-firebase-ios" class="anchor-heading" aria-labelledby="register-your-app-with-firebase-ios"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Register your app with Firebase (iOS) </h3> <p>If you are working with the iOS platform it’s necesary to register a new iOS App in Firebase. From the <strong>Project Overview</strong>, use the <strong>Add app</strong> option and then select the iOS icon to open the registration wizard.</p> <p><img src="/images/addApp.png" alt="Image" /></p> <p>In the registration wizard you must fill out your <strong>iOS bundle ID</strong>, example: <em>com.myadventure.app</em>. This will be the identifier of your app and later you will have to put it in Xcode as well.</p> <p><img src="/images/createIOSProject.gif" alt="Image" /></p> <p>In the next step you must download the configuration file <strong>GoogleService-Info.plist</strong> and continue to the end to complete the app registration. This file contains all the information to link the app with the created project, allowing you to access any of the Firebase services.</p> <p class="text-red-100"><strong>Warning</strong>: This file may be generated with <strong>.xml</strong> extension, however the project will not recognize this extension so it’s very important to change it to <strong>.plist</strong> after you download it.</p> <p>The downloaded <strong>GoogleService-Info.plist</strong> file must be added to the project from Xcode. Inside Xcode you must also change the <strong>Bundle Identifier</strong>, the app <strong>version</strong> and the <strong>build</strong> number.</p> <p><img src="/images/xcodeConfig.gif" alt="Image" /></p><hr /> <blockquote class="text-grey-dk-000"> <p>If you want to migrate in depth to a new App, you can review: <a href="/docs/migrating-to-your-brand" target="_blank">Migrating to your own brand</a>.</p> </blockquote><hr /> <h3 id="register-your-app-with-firebase-android"> <a href="#register-your-app-with-firebase-android" class="anchor-heading" aria-labelledby="register-your-app-with-firebase-android"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Register your app with Firebase (Android) </h3> <p>If you are working with the Android platform it’s necesary to register a new Android App in Firebase. From the <strong>Project Overview</strong>, use the <strong>Add app</strong> option and then select the Android icon to open the registration wizard.</p> <p><img src="/images/addApp.png" alt="Image" /></p> <p>In the registration wizard you must fill out an <strong>Android package name</strong> for your app, example: <em>com.adventuretravelapp</em>. This will be the identifier of your app and later you will also have to include it in the android project.</p> <p><img src="/images/addAndroidApp.png" alt="Image" /></p> <p>Download the generated configuration file <strong>google-service.json</strong> and continue until the end of the wizard to complete the app registration in Firebase. This file contains all the information to link the app with the created project, allowing you to access any of the Firebase services.</p> <p><img src="/images/downloadJson.png" alt="Image" /></p> <p>The downloaded <strong>google-service.json</strong> file must be added to the project inside the <strong>/android/app/</strong> directory. Then you can set the <strong>Android package name</strong> (<strong>applicationId</strong>) and <strong>versionName</strong> in the <strong><em>/android/app/build.gradle</em></strong> file.</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="nx">defaultConfig</span> <span class="p">{</span>
    <span class="nx">applicationId</span> <span class="dl">"</span><span class="s2">com.yoursuperbrand</span><span class="dl">"</span>
    <span class="nx">minSdkVersion</span> <span class="nx">rootProject</span><span class="p">.</span><span class="nx">ext</span><span class="p">.</span><span class="nx">minSdkVersion</span>
    <span class="nx">targetSdkVersion</span> <span class="nx">rootProject</span><span class="p">.</span><span class="nx">ext</span><span class="p">.</span><span class="nx">targetSdkVersion</span>
    <span class="nx">versionCode</span> <span class="mi">1</span>
    <span class="nx">versionName</span> <span class="dl">"</span><span class="s2">1.0</span><span class="dl">"</span>
<span class="p">}</span>
<span class="p">...</span>
</code></pre></div></div> <p>After that you must setup the Firebase project to allow the authentication, create the databases and activate the push notifications (optional).</p> <h2 id="firebase-authentication"> <a href="#firebase-authentication" class="anchor-heading" aria-labelledby="firebase-authentication"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Firebase Authentication </h2> <blockquote class="text-grey-dk-000"> <p>Firebase Authentication provides backend services, easy-to-use SDKs, and ready-made UI libraries to authenticate users to your app. It supports authentication using passwords, phone numbers, popular federated identity providers like Google, Apple, Facebook and Twitter, and more. - <a href="https://firebase.google.com/docs/auth" target="_blank">Firebase Authentication Docs<img src="/images/ext-link.png" alt="icon" /></a></p> </blockquote> <p>As authentication method we use <strong>Email/Password</strong> authentication provider, which allows users to register with their email address and password. Firebase Authentication also provide email address verification, password recovery, and email address change primitives. To activate the Email/Password provider go to the <strong>Authentication</strong> menu of your project in <a href="https://console.firebase.google.com" target="_blank">Firebase Console<img src="/images/ext-link.png" alt="icon" /></a>. Then select the <strong>Sign-in method</strong> tab and activate the Email/Password provider to start using this authentication method in the app.</p> <p><img src="/images/configFirebaseAuth.gif" alt="Image" /></p> <h3 id="apple-sign-in"> <a href="#apple-sign-in" class="anchor-heading" aria-labelledby="apple-sign-in"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Apple Sign-in </h3> <p>For iOS devices you can also activate authentication with Apple Sign-in. With Apple Sign-in users can access the App using their Apple Account and hiding their email address. To activate Apple Sign-in you must go to the <strong>Authentication</strong> menu of your project in <a href="https://console.firebase.google.com" target="_blank">Firebase Console<img src="/images/ext-link.png" alt="icon" /></a>. Then select the <strong>Sign-in method</strong> tab and activate the <strong>Apple</strong> provider to start using this authentication method in the app.</p> <p><img src="/images/apple-signin-firebase.png" alt="Image" /></p> <p>To complete the activation of <strong>Apple Sign-in</strong> you must go to the <a href="https://developer.apple.com" target="_blank">Apple Developer Program<img src="/images/ext-link.png" alt="icon" /></a> site using your apple developer account and go to the <strong>Account</strong> menu and then to <a href="https://developer.apple.com/account/resources/certificates/list" target="_blank"><strong>Certificates, IDs &amp; Profiles</strong><img src="/images/ext-link.png" alt="icon" /></a>. Select <strong>Identifiers</strong> from the menu on the left to add/edit your app identifier.</p> <p><img src="/images/identifiers.png" alt="Image" /></p> <p>If your app identifier is not created yet you can click on the <strong>plus</strong> icon to add your app identifier. In this case you must register an <strong>App ID</strong>, specify the <strong>Bundle ID</strong> and check the option for <strong>Sign In with Apple</strong>. If your App ID already exists select it and go to <strong>Sign In with Apple</strong> and check it.</p> <p><img src="/images/apple-sign-in.png" alt="Image" /></p> <p>In this way you have already configured the Sign in with Apple. If you do not want to include this option you can remove the <strong>AppleButton</strong> from the <strong>LoginScreen</strong> screen located in <em>/src/screens/loginScreen/index.js</em>.</p><hr /> <h2 id="firebase-realtime-database"> <a href="#firebase-realtime-database" class="anchor-heading" aria-labelledby="firebase-realtime-database"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Firebase Realtime Database </h2> <p>In some cases you may need to handle data that requires realtime updating to be displayed on different devices at the same time. We have incorporated <strong>Firebase Realtime Database</strong> (FRD) to store and handle in real time: bookmarks, user information and bookings. When you connect your app to FRD, you’re actually connecting through a WebSocket. WebSockets are much faster than the HTTP protocol, you don’t have to make individual WebSocket calls, because a single socket connection is enough. This allows all your data to be automatically synchronised through that single WebSocket. When you save a change in data, all connected clients receive the updated data almost instantly from the backend.</p> <p><img src="/images/firebaseRealtimeDatabase.png" alt="Image" /></p> <p>For this project it’s necessary to create a FRD before running the app for the first time. To do this just go to the <strong>Realtime Database</strong> menu from <a href="https://console.firebase.google.com" target="_blank">Firebase Console<img src="/images/ext-link.png" alt="icon" /></a> and click on <strong>Create Database</strong> button. Then select the option <em>Start in test mode</em>, just to start using it, later you must include some <a href="/docs/firebase-database-rules/#realtime-database-rules" target="_blank">validation rules</a> for a better security.</p> <p><img src="/images/configRealtimeDB.gif" alt="Image" /></p> <p>With the introduction of this remote database system we hope you will be able to use it plainly in your project for all the data you need to store and synchronize in realtime.</p><hr /> <h2 id="cloud-firestore"> <a href="#cloud-firestore" class="anchor-heading" aria-labelledby="cloud-firestore"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cloud Firestore </h2> <p>There are also data that may not require updating in real time and just run the typical CRUD (Create, Read, Update, Delete) operations of a database without any realtime subscription. In this case we also use <strong>Cloud Firestore</strong> to store application data such as experiences, categories and popular sites, therefore it’s required to create a Firestore database first. To create a Firestore database in your proyect go to the <strong>Cloud Firestore</strong> menu from <a href="https://console.firebase.google.com" target="_blank">Firebase Console<img src="/images/ext-link.png" alt="icon" /></a> and click on <strong>Create Database</strong> button. Then select the option <em>Start in test mode</em>, just to start using it, later you must include some <a href="/docs/firebase-database-rules/#cloud-firestore-security-rules" target="_blank">validation rules</a> for a better security.</p> <p><img src="/images/configFirestore.gif" alt="Image" /></p><hr /> <p>At this point we should have all the backend configuration completed, then we can move on to make other <a href="/docs/app-config">adjustments to the app</a> code and start running it.</p> <h2 id="cloud-messaging-push-notifications"> <a href="#cloud-messaging-push-notifications" class="anchor-heading" aria-labelledby="cloud-messaging-push-notifications"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Cloud Messaging (Push Notifications) </h2> <p>We have added <strong>push notifications</strong> to this project, allowing you to send alerts to users using Firebase’s <strong>Cloud Messaging</strong> service. Firebase Cloud Messaging (FCM) is a cross-platform messaging solution that lets you reliably send messages at no cost. Notifications can be sent directly from Firebase Console or through third party applications integrated with FCM.</p> <p>The notification service is included by default in Firebase iOS and Android projects, however you need to make a few adjustments before you can start using it. For now we recommend to follow the guide to <a href="/docs/app-config">configure the app and run it for the first time</a> and finally proceed with the settings for <a href="/docs/push-notifications">Push Notifications</a>.</p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2022 Svalbard. Distributed by an <a href="https://github.com/just-the-docs/just-the-docs/blob/main/LICENSE.txt">MIT license.</a></p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
